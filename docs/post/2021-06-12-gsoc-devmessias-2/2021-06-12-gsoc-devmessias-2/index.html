<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=generator content="Source Themes Academic 4.8.0">
<meta name=author content="Bruno Messias">
<meta name=description content="Hi all! In this post I'll talk about the PR #437.
There are several reasons to have a streaming system for data visualization. Because I&rsquo;m doing a PhD in a developing country I always need to think of the cheapest way to use the computational resources available.">
<link rel=alternate hreflang=pt-br href=/pt-br/post/2021-06-12-gsoc-devmessias-2/2021-06-12-gsoc-devmessias-2/>
<link rel=alternate hreflang=en href=/post/2021-06-12-gsoc-devmessias-2/2021-06-12-gsoc-devmessias-2/>
<meta name=theme-color content="#2962ff">
<script src=/js/mathjax-config.js></script>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin=anonymous>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin=anonymous>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css crossorigin=anonymous title=hl-light>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css crossorigin=anonymous title=hl-dark disabled>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin=anonymous>
<script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin=anonymous async></script>
<script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js integrity crossorigin=anonymous async></script>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
<link rel=stylesheet href=/css/academic.css>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-178064356-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}function trackOutboundLink(a,b){gtag('event','click',{event_category:'outbound',event_label:a,transport_type:'beacon',event_callback:function(){b!=='_blank'&&(document.location=a)}}),console.debug("Outbound link clicked: "+a)}function onClickCallback(a){if(a.target.tagName!=='A'||a.target.host===window.location.host)return;trackOutboundLink(a.target,a.target.getAttribute('target'))}gtag('js',new Date),gtag('config','UA-178064356-1',{}),document.addEventListener('click',onClickCallback,!1)</script>
<link rel=manifest href=/index.webmanifest>
<link rel=icon type=image/png href=/images/icon_hucd6a3d413e7b81060a1d462b35f64cf9_5018_32x32_fill_lanczos_center_3.png>
<link rel=apple-touch-icon type=image/png href=/images/icon_hucd6a3d413e7b81060a1d462b35f64cf9_5018_192x192_fill_lanczos_center_3.png>
<link rel=canonical href=/post/2021-06-12-gsoc-devmessias-2/2021-06-12-gsoc-devmessias-2/>
<meta property="twitter:card" content="summary">
<meta property="twitter:site" content="@devmessias">
<meta property="twitter:creator" content="@devmessias">
<meta property="og:site_name" content="Bruno Messias">
<meta property="og:url" content="/post/2021-06-12-gsoc-devmessias-2/2021-06-12-gsoc-devmessias-2/">
<meta property="og:title" content="GSoC-  A Stadia-like system for data visualization | Bruno Messias">
<meta property="og:description" content="Hi all! In this post I'll talk about the PR #437.
There are several reasons to have a streaming system for data visualization. Because I&rsquo;m doing a PhD in a developing country I always need to think of the cheapest way to use the computational resources available."><meta property="og:image" content="/images/icon_hucd6a3d413e7b81060a1d462b35f64cf9_5018_512x512_fill_lanczos_center_3.png"><meta property="og:locale" content="en">
<meta property="article:published_time" content="2021-06-12T00:00:00+00:00">
<meta property="article:modified_time" content="2021-06-12T00:00:00+00:00">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/post/2021-06-12-gsoc-devmessias-2/2021-06-12-gsoc-devmessias-2/"},"headline":"GSoC-  A Stadia-like system for data visualization","datePublished":"2021-06-12T00:00:00Z","dateModified":"2021-06-12T00:00:00Z","author":{"@type":"Person","name":"Bruno Messias"},"publisher":{"@type":"Organization","name":"Bruno Messias","logo":{"@type":"ImageObject","url":"/images/icon_hucd6a3d413e7b81060a1d462b35f64cf9_5018_192x192_fill_lanczos_center_3.png"}},"description":"Hi all! In this post I'll talk about the PR #437.\nThere are several reasons to have a streaming system for data visualization. Because I\u0026rsquo;m doing a PhD in a developing country I always need to think of the cheapest way to use the computational resources available."}</script>
<title>GSoC- A Stadia-like system for data visualization | Bruno Messias</title>
</head>
<body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents>
<aside class=search-results id=search>
<div class=container>
<section class=search-header>
<div class="row no-gutters justify-content-between mb-3">
<div class=col-6>
<h1>Search</h1>
</div>
<div class="col-6 col-search-close">
<a class=js-search href=#><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a>
</div>
</div>
<div id=search-box>
<input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search>
</div>
</section>
<section class=section-search-results>
<div id=search-hits>
</div>
</section>
</div>
</aside>
<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main>
<div class=container>
<div class="d-none d-lg-inline-flex">
<a class=navbar-brand href=/>Bruno Messias</a>
</div>
<button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span>
</button>
<div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
<a class=navbar-brand href=/>Bruno Messias</a>
</div>
<div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content>
<ul class="navbar-nav d-md-inline-flex">
<li class=nav-item>
<a class=nav-link href=/#about><span>About</span></a>
</li>
<li class=nav-item>
<a class=nav-link href=/#posts><span>Posts</span></a>
</li>
<li class=nav-item>
<a class=nav-link href=/#projects><span>Projects</span></a>
</li>
<li class=nav-item>
<a class=nav-link href=/#featured><span>Publications</span></a>
</li>
</ul>
</div>
<ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
<li class=nav-item>
<a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a>
</li>
<li class="nav-item dropdown theme-dropdown">
<a href=# class="nav-link js-theme-selector" data-toggle=dropdown aria-haspopup=true>
<i class="fas fa-palette" aria-hidden=true></i>
</a>
<div class=dropdown-menu>
<a href=# class="dropdown-item js-set-theme-light">
<span>Light</span>
</a>
<a href=# class="dropdown-item js-set-theme-dark">
<span>Dark</span>
</a>
<a href=# class="dropdown-item js-set-theme-auto">
<span>Automatic</span>
</a>
</div>
</li>
<li class="nav-item dropdown i18n-dropdown">
<a href=# class="nav-link dropdown-toggle" data-toggle=dropdown aria-haspopup=true>
<i class="fas fa-globe mr-1" aria-hidden=true></i><span class="d-none d-lg-inline">English</span>
</a>
<div class=dropdown-menu>
<div class="dropdown-item dropdown-item-active">
<span>English</span>
</div>
<a class=dropdown-item href=/pt-br/post/2021-06-12-gsoc-devmessias-2/2021-06-12-gsoc-devmessias-2/>
<span>PortuguÃªs (Brasil)</span>
</a>
</div>
</li>
</ul>
</div>
</nav>
<article class=article>
<div class="article-container pt-3">
<h1>GSoC- A Stadia-like system for data visualization</h1>
<div class=article-metadata>
<span class=article-date>
Jun 12, 2021
</span>
<span class=middot-divider></span>
<span class=article-reading-time>
5 min read
</span>
</div>
</div>
<div class=article-container>
<div class=article-style>
<p>Hi all! In this post I'll talk about the PR
<a href=https://github.com/fury-gl/fury/pull/437 target=_blank rel=noopener>#437</a>.</p>
<p>There are several reasons to have a streaming system for data
visualization. Because I&rsquo;m doing a PhD in a developing country I always
need to think of the cheapest way to use the computational resources
available. For example, with the GPUs prices increasing, it&rsquo;s necessary
to share a machine with a GPU with different users in different
locations. Therefore, to convince my Brazilian friends to use FURY I
need to code thinking inside of the (a) low-budget scenario.</p>
<p>To construct the streaming system for my project I&rsquo;m thinking about the
following properties and behaviors:</p>
<ol>
<li>I want to avoid blocking the code execution in the main thread
(where the vtk/fury instance resides).</li>
<li>The streaming should work inside of a low bandwidth environment.</li>
<li>I need an easy way to share the rendering result. For example, using
the free version of ngrok.</li>
</ol>
<p>To achieve the property <strong>1.</strong> we need to circumvent the GIL problem.
Using the threading module alone it&rsquo;s not good enough because we can&rsquo;t
use the python-threading for parallel CPU computation. In addition, to
achieve a better organization it&rsquo;s better to define the server system as
an uncoupled module. Therefore, I believe that multiprocessing-lib in
python will fit very well for our proposes.</p>
<p>For the streaming system to work smoothly in a low-bandwidth scenario we
need to choose the protocol wisely. In the recent years the WebRTC
protocol has been used in a myriad of applications like google hangouts
and Google Stadia aiming low latency behavior. Therefore, I choose the
webrtc as my first protocol to be available in the streaming system
proposal.</p>
<p>To achieve the third property, we must be economical in adding
requirements and dependencies.</p>
<p>Currently, the system has some issues, but it's already working. You
can see some tutorials about how to use this streaming system
<a href=https://github.com/devmessias/fury/tree/feature_fury_stream_client/docs/tutorials/04_stream target=_blank rel=noopener>here</a>.
After running one of these examples you can easily share the results and
interact with other users. For example, using the ngrok For example,
using the ngrok</p>
<pre><code>./ngrok http 8000  
</code></pre>
<p>|</p>
<h2 id=how-does-it-works>How does it works?</h2>
<p>The image below it's a simple representation of the streaming system.</p>
<p><img src=https://user-images.githubusercontent.com/6979335/121934889-33ff1480-cd1e-11eb-89a4-562fbb953ba4.png alt=image1></p>
<p>As you can see, the streaming system is made up of different processes
that share some memory blocks with each other. One of the hardest part
of this PR was to code this sharing between different objects like VTK,
numpy and the webserver. I'll discuss next some of technical issues
that I had to learn/circumvent.</p>
<h3 id=sharing-data-between-process>Sharing data between process</h3>
<p>We want to avoid any kind of unnecessary duplication of data or
expensive copy/write actions. We can achieve this economy of
computational resources using the multiprocessing module from python.</p>
<h4 id=multiprocessing-rawarray>multiprocessing RawArray</h4>
<p>| The
<a href=https://docs.python.org/3/library/multiprocessing.html#multiprocessing.sharedctypes.RawArray target=_blank rel=noopener>RawArray</a>
from multiprocessing allows to share resources between different
processes. However, there are some tricks to get a better performance
when we are dealing with RawArray's. For example,
<a href=https://github.com/devmessias/fury/tree/6ae82fd239dbde6a577f9cccaa001275dcb58229 target=_blank rel=noopener>take a look at my
PR in a older
stage.</a>
In this older stage my streaming system was working well. However, one
of my mentors (Filipi Nascimento) saw a huge latency for
high-resolutions examples. My first thought was that latency was
caused by the GPU-CPU copy from the opengl context. However, I
discovered that I've been using RawArray's wrong in my entire life!
| See for example this line of code
<a href=https://github.com/devmessias/fury/blob/6ae82fd239dbde6a577f9cccaa001275dcb58229/fury/stream/client.py#L101 target=_blank rel=noopener>fury/stream/client.py#L101</a>
The code below shows how I've been updating the raw arrays</p>
<pre><code>raw_arr_buffer[:] = new_data
</code></pre>
<p>This works fine for small and medium sized arrays, but for large ones it
takes a large amount of time, more than GPU-CPU copy. The explanation
for this bad performance is available here :
<a href=https://stackoverflow.com/questions/33853543/demystifying-sharedctypes-performance target=_blank rel=noopener>Demystifying sharedctypes
performance.</a>
The solution which gives a stupendous performance improvement is quite
simple. RawArrays implements the buffer protocol. Therefore, we just
need to use the memoryview:</p>
<pre><code>memview(arr_buffer)[:] = new_data
</code></pre>
<p>The memview is really good, but there it's a litle issue when we are
dealing with uint8 RawArrays. The following code will cause an
exception:</p>
<pre><code>memview(arr_buffer_uint8)[:] = new_data_uint8
</code></pre>
<p>There is a solution for uint8 rawarrays using just memview and cast
methods. However, numpy comes to rescue and offers a simple and a
generic solution. You just need to convert the rawarray to a np
representation in the following way:</p>
<pre><code>arr_uint8_repr = np.ctypeslib.as_array(arr_buffer_uint8)
arr_uint8_repr[:] = new_data_uint8
</code></pre>
<p>You can navigate to my repository in this specific
<a href=https://github.com/devmessias/fury/commit/b1b0caf30db762cc018fc99dd4e77ba0390b2f9e target=_blank rel=noopener>commit
position</a>
and test the streaming examples to see how this little modification
improves the performance.</p>
<h3 id=multiprocessing-inside-of-different-operating-systems>Multiprocessing inside of different Operating Systems</h3>
<p>Serge Koudoro, who is one of my mentors, has pointed out an issue of the
streaming system running in MacOs. I don't know many things about
MacOs, and as pointed out by Filipi the way that MacOs deals with
multiprocessing is very different than the Linux approach. Although we
solved the issue discovered by Serge, I need to be more careful to
assume that different operating systems will behave in the same way. If
you want to know more,I recommend that you read this post
<a href=https://britishgeologicalsurvey.github.io/science/python-forking-vs-spawn/ target=_blank rel=noopener>Python:
Forking vs
Spawm</a>.
And it's also important to read the official documentation from python.
It can save you a lot of time. Take a look what the official python
documentation says about the multiprocessing method</p>
<p><img src=https://user-images.githubusercontent.com/6979335/121958121-b0ebb780-cd39-11eb-862a-37244f7f635b.png alt=image2>
Source:
<a href=https://docs.python.org/3/library/multiprocessing.html target=_blank rel=noopener>https://docs.python.org/3/library/multiprocessing.html</a></p>
</div>
<div class=article-tags>
<a class="badge badge-light" href=/tag/gsoc/>gsoc</a>
<a class="badge badge-light" href=/tag/python/>python</a>
<a class="badge badge-light" href=/tag/open-source/>open-source</a>
<a class="badge badge-light" href=/tag/data-viz/>data-viz</a>
<a class="badge badge-light" href=/tag/webrtc/>webrtc</a>
</div>
<div class=share-box aria-hidden=true>
<ul class=share>
<li>
<a href="https://twitter.com/intent/tweet?url=/post/2021-06-12-gsoc-devmessias-2/2021-06-12-gsoc-devmessias-2/&text=GSoC-%20%20A%20Stadia-like%20system%20for%20data%20visualization" target=_blank rel=noopener class=share-btn-twitter>
<i class="fab fa-twitter"></i>
</a>
</li>
<li>
<a href="https://www.facebook.com/sharer.php?u=/post/2021-06-12-gsoc-devmessias-2/2021-06-12-gsoc-devmessias-2/&t=GSoC-%20%20A%20Stadia-like%20system%20for%20data%20visualization" target=_blank rel=noopener class=share-btn-facebook>
<i class="fab fa-facebook"></i>
</a>
</li>
<li>
<a href="mailto:?subject=GSoC-%20%20A%20Stadia-like%20system%20for%20data%20visualization&body=/post/2021-06-12-gsoc-devmessias-2/2021-06-12-gsoc-devmessias-2/" target=_blank rel=noopener class=share-btn-email>
<i class="fas fa-envelope"></i>
</a>
</li>
<li>
<a href="https://www.linkedin.com/shareArticle?url=/post/2021-06-12-gsoc-devmessias-2/2021-06-12-gsoc-devmessias-2/&title=GSoC-%20%20A%20Stadia-like%20system%20for%20data%20visualization" target=_blank rel=noopener class=share-btn-linkedin>
<i class="fab fa-linkedin-in"></i>
</a>
</li>
<li>
<a href="whatsapp://send?text=GSoC-%20%20A%20Stadia-like%20system%20for%20data%20visualization%20/post/2021-06-12-gsoc-devmessias-2/2021-06-12-gsoc-devmessias-2/" target=_blank rel=noopener class=share-btn-whatsapp>
<i class="fab fa-whatsapp"></i>
</a>
</li>
<li>
<a href="https://service.weibo.com/share/share.php?url=/post/2021-06-12-gsoc-devmessias-2/2021-06-12-gsoc-devmessias-2/&title=GSoC-%20%20A%20Stadia-like%20system%20for%20data%20visualization" target=_blank rel=noopener class=share-btn-weibo>
<i class="fab fa-weibo"></i>
</a>
</li>
</ul>
</div>
<div class="media author-card content-widget-hr">
<img class="avatar mr-3 avatar-circle" src=/author/bruno-messias/avatar_huacf3e258466895f99c1cf2dac791c4d2_25846_270x270_fill_lanczos_center_3.png alt="Bruno Messias">
<div class=media-body>
<h5 class=card-title><a href=/>Bruno Messias</a></h5>
<h6 class=card-subtitle>Ph.D Student/Software Developer</h6>
<p class=card-text></p>
<ul class=network-icon aria-hidden=true>
<li>
<a href=mailto:devmessias@gmail.com>
<i class="fas fa-envelope"></i>
</a>
</li>
<li>
<a href=https://twitter.com/devmessias target=_blank rel=noopener>
<i class="fab fa-twitter"></i>
</a>
</li>
<li>
<a href=https://github.com/devmessias target=_blank rel=noopener>
<i class="fab fa-github"></i>
</a>
</li>
<li>
<a href=https://www.linkedin.com/in/bruno-messias-510553193/ target=_blank rel=noopener>
<i class="fab fa-linkedin"></i>
</a>
</li>
</ul>
</div>
</div>
<div class="article-widget content-widget-hr">
<h3>Related</h3>
<ul>
<li><a href=/post/2021-23-08-gsoc-devmessias-final-report/2021-23-08-gsoc-devmessias-final-report/>GSoC- Google Summer of Code 2021 Final Work Product</a></li>
<li><a href=/post/2021-16-08-gsoc-devmessias-11/2021-16-08-gsoc-devmessias-11/>GSoC- SDF fonts and OpenGL</a></li>
<li><a href=/post/2021-07-12-gsoc-devmessias-6/2021-07-12-gsoc-devmessias-6/>GSoC- Network layout algorithms using IPC</a></li>
<li><a href=/post/2021-06-21-gsoc-devmessias-3/2021-06-21-gsoc-devmessias-3/>GSoC- Bugs!</a></li>
<li><a href=/project/helios/>Helios: graph layout viz and streaming</a></li>
</ul>
</div>
</div>
</article>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.8/mermaid.min.js integrity="sha256-lyWCDMnMeZiXRi7Zl54sZGKYmgQs4izcT7+tKc+KUBk=" crossorigin=anonymous title=mermaid></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin=anonymous></script>
<script>const code_highlighting=!0</script>
<script>const isSiteThemeDark=!1</script>
<script>const search_config={indexURI:"/index.json",minLength:1,threshold:.3},i18n={no_results:"No results found",placeholder:"Search...",results:"results found"},content_type={post:"Posts",project:"Projects",publication:"Publications",talk:"Talks",slides:"Slides"}</script>
<script id=search-hit-fuse-template type=text/x-template>
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script>
<script src=/js/academic.min.4aaf2d64e50f8e54cf66dcc54147a22e.js></script>
<div class=container>
<footer class=site-footer>
<p class=powered-by>
</p>
<p class=powered-by>
Powered by the
<a href=https://sourcethemes.com/academic/ target=_blank rel=noopener>Academic theme</a> for
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a>.
<span class=float-right aria-hidden=true>
<a href=# class=back-to-top>
<span class=button_icon>
<i class="fas fa-chevron-up fa-2x"></i>
</span>
</a>
</span>
</p>
</footer>
</div>
<div id=modal class="modal fade" role=dialog>
<div class=modal-dialog>
<div class=modal-content>
<div class=modal-header>
<h5 class=modal-title>Cite</h5>
<button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span>
</button>
</div>
<div class=modal-body>
<pre><code class="tex hljs"></code></pre>
</div>
<div class=modal-footer>
<a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank>
<i class="fas fa-copy"></i> Copy
</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank>
<i class="fas fa-download"></i> Download
</a>
<div id=modal-error></div>
</div>
</div>
</div>
</div>
</body>
</html>